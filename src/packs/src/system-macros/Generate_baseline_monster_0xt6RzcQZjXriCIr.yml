_id: 0xt6RzcQZjXriCIr
_key: '!macros!0xt6RzcQZjXriCIr'
author: PFgG0QDGESRjDZPI
command: "// All arrays indexed by level, 0-14\nconst attackBonuses = [5, 6, 7, 8,\
  \ 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19]\nconst ac = [16, 17, 18, 19, 20, 21,\
  \ 22, 23, 24, 25, 26, 27, 28, 29, 30]\nconst pd = [14, 15, 16, 17, 18, 19, 20, 21,\
  \ 22, 23, 24, 25, 26, 27, 28]\nconst md = [10, 11, 12, 13, 14, 15, 16, 17, 18, 19,\
  \ 20, 21, 22, 23, 24]\nconst init = [3, 3, 6, 6, 6, 9, 9, 9, 12, 12, 12, 15, 15,\
  \ 15, 18]\n\nconst statsByStrength = {\n  normal: {\n    damage: [6, 8, 10, 12,\
  \ 15, 20, 25, 30, 40, 50, 60, 80, 100, 120, 160],\n    hp: [25, 30, 40, 50, 60,\
  \ 80, 100, 120, 160, 200, 240, 320, 400, 480, 640]\n  },\n  mook: {\n    damage:\
  \ [3, 4, 5, 6, 8, 10, 12, 16, 20, 24, 30, 40, 50, 60, 80],\n    hp: [6, 8, 10, 12,\
  \ 15, 20, 25, 30, 40, 50, 60, 80, 100, 120, 160]\n  },\n  weakling: {\n    damage:\
  \ [3, 4, 5, 6, 8, 10, 12, 16, 20, 24, 30, 40, 50, 60, 80],\n    hp: [13, 15, 20,\
  \ 25, 30, 40, 50, 60, 80, 100, 120, 160, 200, 240, 320]\n  },\n  elite: {\n    damage:\
  \ [9, 12, 15, 18, 22, 30, 38, 45, 60, 75, 90, 120, 150, 180, 240],\n    hp: [38,\
  \ 45, 60, 75, 90, 120, 150, 180, 240, 300, 360, 480, 600, 720, 960]\n  },\n  double:\
  \ {\n    damage: [9, 12, 15, 18, 22, 30, 35, 45, 60, 75, 90, 120, 150, 180, 240],\n\
  \    damageSecondary: [3, 4, 5, 6, 8, 10, 15, 15, 20, 25, 30, 40, 50, 60, 80],\n\
  \    hp: [50, 60, 80, 100, 120, 160, 200, 240, 320, 400, 480, 640, 800, 960, 1280]\n\
  \  },\n  triple: {\n    damage: [9, 12, 15, 18, 22, 30, 35, 45, 60, 75, 90, 120,\
  \ 150, 180, 240],\n    damageSecondary: [9, 12, 15, 18, 22, 30, 35, 45, 60, 75,\
  \ 90, 120, 150, 180, 240],\n    hp: [75, 90, 120, 150, 180, 240, 300, 360, 480,\
  \ 600, 720, 960, 1200, 1440, 1920]\n  }\n}\n\nnew foundry.applications.api.DialogV2({\n\
  \  window: { title: 'Choose an option' },\n  content: `\n    <label>\n      Monster\
  \ Level:\n      <select name=\"level\">\n        ${[...Array(15).keys()]\n     \
  \     .map(i => `<option value=\"${i}\">Level ${i}</option>`)\n          .join('')}\n\
  \      </select>\n    </label>\n\n    <label>\n      Monster Strength:\n      <select\
  \ name=\"strength\">\n        <option value=\"normal\" selected>Standard</option>\n\
  \        <option value=\"mook\">Mook</option>\n        <option value=\"weakling\"\
  >Weakling</option>\n        <option value=\"elite\">Elite</option>\n        <option\
  \ value=\"double\">Double Strength</option>\n        <option value=\"triple\">Triple\
  \ Strength</option>\n      </select>\n    </label>\n  `,\n  buttons: [\n    {\n\
  \      action: 'create',\n      label: 'Create Monster',\n      default: true,\n\
  \      callback: (event, button, dialog) => ({\n        level: parseInt(button.form.elements.level.value),\n\
  \        strength: button.form.elements.strength.value\n      })\n    }\n  ],\n\
  \  submit: async ({ level, strength }) => {\n    console.log('Creating monster with\
  \ options:', { level, strength })\n    const stats = statsByStrength[strength]\n\
  \    const systemData = {\n      attributes: {\n        ac: { value: ac[level] },\n\
  \        pd: { value: pd[level] },\n        md: { value: md[level] },\n        init:\
  \ { value: init[level] },\n        level: { value: level },\n        hp: {\n   \
  \       value: stats.hp[level],\n          max: stats.hp[level]\n        }\n   \
  \   },\n      details: {\n        flavor: {\n          value: `<p>Monster from baseline\
  \ stats: ${strength} level ${level}.</p>`\n        },\n        role: { value: strength\
  \ === 'mook' ? 'mook' : 'troop' },\n        strength: { value: strength === 'mook'\
  \ ? 'normal' : strength },\n        level: { value: level }\n      }\n    }\n  \
  \  actor = await game.archmage.ActorArchmage.create({\n      name: `Baseline level\
  \ ${level} monster (${strength})`,\n      type: 'npc',\n      system: systemData\n\
  \    })\n    await actor.createEmbeddedDocuments('Item', [\n      {\n        name:\
  \ 'Basic Attack',\n        type: 'action',\n        system: {\n          attack:\
  \ { value: `[[d20+${attackBonuses[level]}]] vs. AC` },\n          hit: { value:\
  \ `[[${stats.damage[level]}]] damage` }\n        }\n      }\n    ])\n    if (stats.damageSecondary)\
  \ {\n      await actor.createEmbeddedDocuments('Item', [\n        {\n          name:\
  \ 'Secondary Attack',\n          type: 'action',\n          system: {\n        \
  \    attack: { value: `[[d20+${attackBonuses[level]}]] vs. AC` },\n            hit:\
  \ { value: `[[${stats.damageSecondary[level]}]] damage` }\n          }\n       \
  \ }\n      ])\n    }\n    actor.sheet.render(true)\n  }\n}).render({ force: true\
  \ })"
flags: {}
folder: null
img: icons/svg/dice-target.svg
name: Generate baseline monster
ownership:
  default: 0
scope: global
sort: 0
type: script
